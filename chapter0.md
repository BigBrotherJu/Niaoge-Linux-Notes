# 0. 计算机概论

## 0.1 电脑

- 计算机的定义

  计算机的定义为：『接受使用者输入指令与资料，经由中央处理器的数学与逻辑单元运算处理后，以产生或储存成有用的资讯』；

### 电脑硬件的五大单元

- 电脑硬件的五大单元

  ![computer02](鸟哥Linux.image/computer02.gif)

  电脑的五大单元包括：

  - 输入单元

  - 输出单元

  - CPU

    CPU为一个具有特定功能的晶片，里头含有微指令集。

    - 控制单元

      控制单元则主要在协调各周边元件与各单元间的工作。

    - 算数逻辑单元

      算数逻辑单元主要负责程式运算与逻辑判断。

      CPU读取的资料都是从主记忆体来的。

  - 记忆单元

    - 主记忆体
    - 辅助记忆体

### CPU架构

- 两种CPU指令集

  CPU依设计理念主要分为：

  - 精简指令集(RISC)

    这种CPU 的设计中，微指令集较为精简，每个指令的执行时间都很短，完成的动作也很单纯，指令的执行效能较佳；

    但是若要做复杂的事情，就要由多个指令来完成。

    - 甲骨文(Oracle) 公司的SPARC 系列

      SPARC CPU的电脑常用于学术领域的大型工作站中，包括银行金融体系的主要伺服器也都有这类的电脑架构。

    - IBM 公司的Power Architecture (包括PowerPC) 系列

      至于PowerPC架构的应用上，例如新力(Sony)公司出产的Play Station 3(PS3)就是使用PowerPC架构的Cell处理器。

    - 安谋公司(ARM Holdings) 的ARM CPU 系列

      你常使用的各厂牌手机、PDA、导航系统、网路设备(交换器、路由器等)等，几乎都是使用ARM架构的CPU喔！

  - 复杂指令集(CISC)系统

    与RISC不同的，CISC在微指令集的每个小指令可以执行一些较低阶的硬体操作，指令数目多而且复杂， 每条指令的长度并不相同。

    因为指令执行较为复杂所以每条指令花费的时间较长， 但每条个别指令可以处理的工作较为丰富。

    常见的CISC微指令集CPU主要有AMD、Intel、VIA等的x86架构的CPU。

    在2003年以前由Intel所开发的x86架构CPU由8位元升级到16、32位元，后来AMD依此架构修改新一代的CPU为64位元， 为了区别两者的差异，因此64位元的个人电脑CPU又被统称为x86_64的架构喔！

    > 所谓的位元指的是CPU一次资料读取的最大量！64位元CPU代表CPU一次可以读写64bits这么多的资料，32位元CPU则是CPU一次只能读取32位元的意思。因为CPU读取资料量有限制，因此能够从记忆体中读写的资料也就有所限制。所以，一般32位元的CPU所能读写的最大资料量，大概就是4GB左右。

### 计算单位

- 文件容量使用二进制

  1 GBytes 的文件大小实际上为：1024x1024x1024 Bytes。

- 速度使用十进制

  1GHz 就是1000x1000x1000 Hz 的意思。

- i

  其实，若要区分2 进制还是10 进制的容量，目前也经常使用GB 与GiB 之类的方式来辨别，GB 为10 进位，加上i 成为GiB 则是2 进位这样！所有的容量都可以这样处理的！包括KiB, TiB 等等喔！

- 硬盘容量

  因为一般硬碟制造商会使用十进位的单位，所以500GByte代表为500*1000*1000*1000Byte之意。转成档案的容量单位时使用二进位(1024为底)，所以就成为466GB左右的容量了。

  硬碟厂商并非要骗人，只是因为硬碟的最小物理量为512Bytes，最小的组成单位为磁区(sector)，通常硬碟容量的计算采用『多少个sector』，所以才会使用十进位来处理的。相关的硬碟资讯在这一章后面会提到的！

## 0.2 个人电脑架构与相关设备

### CPU

- 主频

  主频就是CPU每秒钟可以进行的工作次数。

  所以主频越高表示这颗CPU单位时间内可以作更多的事情。

  举例来说，Intel的i7-4790 CPU主频为3.6GHz，表示这颗CPU在一秒内可以进行3.6x10^9^次工作，每次工作都可以进行少数的指令运作之意。

- 使用主频比较CPU性能

  注意，不同的CPU之间不能单纯的以时脉来判断运算效能喔！这是因为每颗CPU的微指令集不相同，架构也不见得一样，可使用的第二层快取及其计算机制可能也不同， 加上每次时脉能够进行的工作指令数也不同！所以，时脉目前仅能用来比较同款CPU的速度！

- 外频和倍频

  - 早期因为北桥所有设备的频率要一样

    早期的CPU 架构主要透过**北桥**来连结系统最重要的CPU、主记忆体与显示卡装置。因为所有的设备都得掉透过北桥来连结，因此每个设备的工作频率应该要**相同**。于是就有所谓的前端汇流排(FSB) 这个东西的产生。

    但因为CPU 的运算速度比其他的设备都要来的快，又为了要满足FSB 的频率，因此厂商就在CPU 内部再进行加速， 于是就有所谓的外频与倍频了。

  - 外频和倍频定义

    在早期的CPU设计中，所谓的外频指的是CPU与外部元件进行资料传输时的速度，倍频则是CPU内部用来加速工作效能的一个倍数，两者相乘才是CPU的主频。

    例如Intel Core 2 E8400的主频为3.0GHz，而外频是333MHz，因此倍频就是9倍啰！(3.0G=333Mx9,其中1G=1000M)

  - 超频

    将CPU的**倍频**或者是**外频**透过主机板的设定功能更改成较高频率的一种方式。但因为CPU的倍频通常在出厂时已经被锁定而无法修改，因此较常被超频的为**外频**。

    举例来说，像上述3.0GHz的CPU如果想要超频，可以将他的外频333MHz调整成为400MHz，但如此一来整个主机板的各个元件的运作频率可能都会被增加成原本的1.333倍(4 /3)，虽然CPU可能可以到达3.6GHz，但却因为频率并非正常速度，故可能会造成当机等问题。

  - 没有北桥不需要考虑外频

    因为现在没有所谓的北桥了(整合到CPU内)，因此，CPU的时脉设计就无须考虑得要同步的外频，只需要考量整体的频率即可。

  - 字组

    CPU每次能够处理的资料量称为字组大小(word size)，字组大小依据CPU的设计而有32位元与64位元。我们现在所称的电脑是32或64位元主要是依据这个CPU解析的字组大小而来的！

- Hyper-Threading

  我们知道现在的CPU 运算速度都太快了，因此运算核心经常处于闲置状态下。而我们也知道现在的系统大多都是多工的系统， 同时间有很多的程序会让CPU 来执行。因此，若CPU 可以假象的同时执行两个程序，不就可以让系统效能增加了吗？反正CPU 的运算能力还是没有用完啊！

  那是怎么达成的啊这个HT 功能？强者鸟哥的同事蔡董大大用个简单的说明来解释。

  在每一个CPU 内部将重要的暂存器(register) 分成两群， 而让程序分别使用这两群暂存器。也就是说，可以有两个程序『同时竞争CPU 的运算单元』，而非透过作业系统的多工切换！这一过程就会让CPU 好像『同时有两个核心』的模样！因此，虽然大部分i7 等级的CPU 其实只有四个实体核心，但透过HT 的机制， 则作业系统可以抓到八个核心！并且让每个核心逻辑上分离，就可以同时运作八个程序了。

### 记忆体

- DRAM

  个人电脑的主记忆体主要元件为动态随机存取记忆体(Dynamic Random Access Memory, DRAM)。

  DRAM根据技术的更新又分好几代，而使用上较广泛的有所谓的**SDRAM**与**DDR SDRAM**两种。这两种记忆体的差别除了在于脚位与工作电压上的不同之外，DDR是所谓的双倍资料传送速度(Double Data Rate)，他可以在一次工作周期中进行两次资料的传送，感觉上就好像是CPU的倍频啦！所以传输频率方面比SDRAM还要好。新一代的PC大多使用DDR记忆体了。

  DDR SDRAM又依据技术的发展，有DDR, DDR2, DDR3, DDR4等等，其中，DDR2 的频率倍数则是4 倍而DDR3 则是8 倍喔！目前鸟哥用到伺服器等级的记忆体，已经到DDR4 了耶！超快超快！

- 多通道设计

  由于所有的资料都必须要存放在主记忆体，所以主记忆体的资料宽度当然是越大越好。但传统的总线宽度一般大约仅达64位元，为了要加大这个宽度，因此晶片组厂商就将两个主记忆体汇整在一起， 如果一支记忆体可达64位元，两支记忆体就可以达到128位元了，这就是双通道的设计理念。

- SRAM

  因为第二层快取(L2 cache)整合到CPU内部，因此这个L2记忆体的速度必须要CPU时脉相同。使用DRAM是无法达到这个时脉速度的，此时就需要静态随机存取记忆体(Static Random Access Memory, SRAM)的帮忙了。

  SRAM在设计上使用的电晶体数量较多，价格较高，且不易做成大容量，不过由于其速度快， 因此整合到CPU内成为快取记忆体以加快资料的存取是个不错的方式喔！新一代的CPU都有内建容量不等的L2快取在CPU内部， 以加快CPU的运作效能。

- ROM

  各个元件的参数被记录在主板上一个叫CMOS的芯片上，这个芯片需要额外的电源来发挥记录功能， 这也是为什么你的主机板上面会有一颗电池的缘故。CMOS内的资料通过BIOS来读取和更新。

  BIOS(Basic Input Output System)是一套程式，这套程式是写死到主机板上面的一个记忆体晶片中， 这个记忆体晶片在没有通电时也能够将资料记录下来，那就是**唯读记忆体**(Read Only Memory, ROM)；

  BIOS原本使用的是无法改写的ROM ，因此根本无法修正BIOS程式码！为此，现在的BIOS通常是写入类似快闪记忆体(flash)或EEPROM。

### 显示卡

显示卡的规格由早期的PCI导向AGP，近期AGP又被PCI-Express规格所取代了。如前面华硕主机板图示当中看到的就是PCI-Express的插槽。这些插槽最大的差异就是在资料传输的频宽了！

目前主流的外接卡界面大多为PCIe 界面，且最新为PCIe 3.0，单通道速度高达1GBytes/s

常见的显示卡连接到萤幕的界面有HDMI/DVI/D-Sub/Display port 等等。HDMI 可同时传送影像与声音。

### 存储设备

电脑系统上面的储存设备包括有：硬碟、软碟、MO、CD、DVD、磁带机、随身碟(快闪记忆体)、还有新一代的蓝光光碟机等， 乃至于大型机器的区域网路储存设备(SAN, NAS)等等，都是可以用来储存资料的。

- 硬盘

  传统硬碟的组成为：

  - 圆形磁碟盘

    - 扇区

      当初设计就是在类似磁碟盘同心圆上面切出一个一个的小区块，这些小区块整合成一个圆形，让机器手臂上的读写头去存取。

      这个小区块就是磁碟的最小物理储存单位，称之为**磁区**(sector)。

      我们知道同心圆外圈的圆比较大，占用的面积比内圈多啊！所以，为了善用这些空间，因此外围的圆会具有更多的磁区。

      此外，当磁碟盘转一圈时，外圈的磁区数量比较多，因此如果资料写入在外圈，转一圈能够读写的资料量当然比内圈还要多！因此通常资料的读写会由外圈开始往内写的喔！

      - 磁区大小

        另外，原本硬碟的磁区都是设计成512byte 的容量，但因为近期以来硬碟的容量越来越大，为了减少资料量的拆解，所以新的高容量硬碟已经有4Kbyte 的磁区设计！

      - 磁碟分割方式

        也因为这个磁区的设计不同了，因此在**磁碟的分割**方面，目前有旧式的MSDOS 相容模式，以及较新的GPT 模式喔！

        在较新的GPT 模式下，磁碟的分割通常使用**磁区号码**来设计，跟过去旧的MSDOS 是透过**磁柱号码**来分割的情况不同喔！

    - 扇道

      那同一个同心圆的磁区组合成的圆就是所谓的磁轨(track)。

    - 磁柱

      由于磁碟里面可能会有多个磁碟盘，因此在所有磁碟盘上面的同一个磁轨可以组合成所谓的磁柱(cylinder)。

  - 机械手臂

  - 磁碟读取头

  - 主轴马达

  实际的资料都是写在具有磁性物质的**磁碟盘**上头，而读写主要是透过在**机械手臂**上的**读取头**(head)来达成。 

  实际运作时，**主轴马达**让**磁碟盘**转动，然后**机械手臂**可伸展让**读取头**在**磁碟盘**上头进行读写的动作。

  另外，由于单一磁碟盘的容量有限，因此有的硬碟内部会有两个以上的磁碟盘喔！

- 传输接口

  近年来在测试磁碟的效能时， 有个很特殊的单位，称为每秒读写操作次数(Input/Output Operations Per Second, IOPS)！这个数值越大，代表可操作次数较高，当然效能好的很！

  磁碟连接到主机板的界面大多为SATA 或SAS，目前桌机主流为SATA 3.0，理论极速可达600Mbytes/s。

  - SATA, IDE(ATA)

    IDE(ATA)被SATA取代。

  - SCSI, SAS

    SCSI被SAS取代。

    早期工作站或大型大脑上面，为了读写速度与稳定度，因此在这样的机器上面，大多使用的是SCSI 这种高阶的连接介面。不过这种介面的速度后来被SATA 打败了！

    但是SCSI 有其值得开发的功能，因此后来就有串列式SCSI (Serial Attached SCSI, SAS) 的发展。这种介面的速度比SATA 来的快，而且连接的SAS 硬碟的磁碟盘转速与传输的速度也都比SATA 硬碟好！

### 主机板

- IO地址和IRQ

  主机板是负责各个电脑元件之间的沟通，但是电脑元件实在太多了，有输出/输入/不同的储存装置等等， 主机板晶片组怎么知道如何负责沟通呐？这个时候就需要用到所谓的I/O位址与IRQ啰！

  I/O位址有点类似每个装置的门牌号码，每个装置都有他自己的位址，一般来说，不能有两个装置使用同一个I/O位址， 否则系统就会不晓得该如何运作这两个装置了。而除了I/O位址之外，还有个IRQ中断(Interrupt)这个咚咚。

  如果I/O位址想成是各装置的门牌号码的话，那么IRQ就可以想成是各个门牌连接到邮件中心(CPU)的专门路径啰！各装置可以透过IRQ中断通道来告知CPU该装置的工作情况，以方便CPU进行工作分配的任务。老式的主机板晶片组IRQ只有15个，如果你的周边介面太多时可能就会不够用， 这个时候你可以选择将一些没有用到的周边介面关掉，以空出一些IRQ来给真正需要使用的介面喔！当然，也有所谓的sharing IRQ的技术就是了！

- CMOS与BIOS

  - CMOS

    CMOS主要的功能为记录主机板上面的重要参数，包括系统时间、CPU电压与频率、各项设备的I /O位址与IRQ等，由于这些资料的记录要花费电力，因此主机板上面才有电池。

  - BIOS

    BIOS为写入到主机板上某一块flash或EEPROM的程式，他可以在开机的时候执行，以载入CMOS当中的参数，并尝试呼叫储存装置中的开机程式，进一步进入作业系统当中。BIOS程式也可以修改CMOS中的资料，

## 0.3 数据表示方式

常见的文字编码为ASCII，繁体中文编码主要有Big5 及UTF8 两种，目前主流为UTF8。

## 0.4 软件

一般来说，目前的电脑系统将程序分为两大类：

- 一个是系统程序
- 一个是用户程序

但鸟哥认为我们还是得要了解一下什么是程序， 尤其是机器程序。

### 机器码与高级语言

- 机器码

  我们需要CPU帮忙工作时，就得要参考微指令集的内容， 然后撰写让CPU读的懂的指令码给CPU执行，这样就能够让CPU运作了。

  但是这样非常麻烦。

- 高级语言

  为了解决这个问题，电脑科学家设计出一种让人类看的懂的程序语言， 然后创造一种『编译器』来将这些人类能够写的程式语言转译成为机器能看懂得机器码， 如此一来我们修改与撰写程式就变的容易多了！

  问题是，在这样的环境底下我们还是得要考量整体的硬体系统来设计程式喔！

  举例来说，当你需要将运作的资料写入记忆体中，你就得要自行分配一个记忆体区块出来让自己的资料能够填上去， 所以你还得要了解到记忆体的位址是如何定位的，啊！眼泪还是不知不觉的流了下来... 怎么写程式这么麻烦啊！

  为了要克服硬体方面老是需要重复撰写控制码的问题，所以就有作业系统(Operating System, OS)的出现了！什么是作业系统呢？底下就来谈一谈先！

### 操作系统

那如果我能够将所有的硬体都驱动， 并且提供一个发展软体的参考介面来给工程师开发软体的话，那发展软体不就变的非常的简单了？那就是作业系统啦！

- 操作系统核心

  作业系统(Operating System, OS)其实也是一组程式， 这组程式的重点在于管理电脑的所有活动以及**驱动系统中的所有硬体**。

  总之，硬体的所有动作都必须要透过这个作业系统来达成就是了。

  因为核心主要在管控硬体与提供相关的能力(例如存取硬碟、网路功能、CPU资源取得等)，这些管理的动作是非常的重要的，如果使用者能够直接使用到核心的话，万一使用者不小心将核心程式停止或破坏，将会导致整个系统的崩溃！因此核心程式所放置到记忆体当中的区块是受保护的！并且开机后就一直常驻在记忆体当中。

- 系统呼叫层

  作业系统通常会提供一整组的开发介面给工程师来开发软体！工程师只要遵守该开发介面那就很容易开发软体了！举例来说，我们学习C程式语言只要参考C程式语言的函式即可， 不需要再去考量其他核心的相关功能，因为核心的系统呼叫介面会主动的将C程式语言的**相关语法转成核心可以了解的任务函数**， 那核心自然就能够顺利运作该程式了！

  为了保护核心，并且让程式设计师比较容易开发软体，因此作业系统除了核心程式之外，通常还会提供一整组开发介面， 那就是系统呼叫层。软体开发工程师只要遵循公认的系统呼叫参数来开发软体，该软体就能够在该核心上头运作。

### 应用程序

应用程式是参考作业系统提供的开发介面所开发出来软体，这些软体可以让使用者操作，以达到某些电脑的功能利用。